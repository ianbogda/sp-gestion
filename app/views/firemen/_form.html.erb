<p>Les champs marqués d'une astérisque (*) sont obligatoires.</p>
<%- form_for(@fireman) do |f| -%>
  <div class="span-4 first">
  <%- if !@fireman.errors.blank? -%>
    <p class="message error">Veuillez corriger les erreurs avant de pouvoir continuer.</p>
  <%- end -%>    
  <p>
    <%= f.label(:firstname, "Prénom *", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:firstname, :class => "span-2 first") %>
      <%= error_message_on(:fireman, :firstname, :css_class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:lastname, "Nom *", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:lastname, :class => "span-2 first") %>
      <%= error_message_on(:fireman, :lastname, :css_class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:status, "Statut *", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.select(:status, Fireman::STATUS.sort, :class => "span-2 first") %>
      <%= js_for_status %>
      <%= error_message_on(:fireman, :status, :css_class => "span-2 first") %>
    </span>    
  </p>
  <p>
    <%= f.label(:birthday, "Date de naissance", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:birthday, :value => l!(f.object.birthday), :class => "span-1 first", :class => "date") %>
    </span>
  </p>
  </div>
  <div class="span-2" id="grades" style="<%= style_for_grade(@fireman) %>">
    <div><b>Grade (*)</b><br />Saisissez la date de nomination à côté de chaque grade obtenu.</div>
    <table>
    <%- f.fields_for(:grades) do |g| -%>
      <%= render :partial => 'grade', :locals => { :f => g } %>
    <%- end -%>
    </table>
    <%= error_message_on(:fireman, :grades, :css_class => "span-2 first") %>    
  </div>
  <div class="span-5 first">
    <%= button_tag(:submit, "Enregistrer") %> ou <%= link_to("Annuler", firemen_path) %>
  </div>
<%- end -%>
<%- content_for(:header) do -%>
  <%= stylesheet_link_tag("back/jquery-ui-1.7.2.custom.css")%>
  <%= javascript_include_tag("jquery-ui-i18n.min.js", "timepicker.js") %>
<%- end -%>
<%= javascript_tag("
      $(function() {
        $.datepicker.setDefaults($.datepicker.regional['fr']);
        $('.date').datepicker({ showMonthAfterYear: false,
                                changeYear: true,
                                changeMonth: true,
                                dateFormat: 'dd/mm/yy',
                                constrainInput: true,
                                minDate: '-50y',
                                maxDate: '+0',
                                yearRange: '#{Date.today.year-50}:#{Date.today.year}'});
      });
      ") %>