<p>Les champs marqués d'une astérisque (*) sont obligatoires.</p>
<%= form_for([@check_list, @item]) do |f| %>
  <p>
    <%= f.label(:title, "Titre (*)", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:title, :class => "span-2 first") %>
      <%= error_message_on(:item, :title, :css_class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:quantity, "Quantité (*)", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:quantity, :class => "span-2 first") %>
      <%= error_message_on(:item, :quantity, :css_class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:place, "Emplacement", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:place, :class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:birthday, "Date d'expiration", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_field(:expiry, :value => l!(f.object.expiry), :class => "span-1 first", :class => "date") %>
      <%= error_message_on(:item, :expiry, :css_class => "span-2 first") %>
    </span>
  </p>
  <p>
    <%= f.label(:rem, "Remarque", :class => "span-1 first") %>
    <span class="span-3">
      <%= f.text_area(:rem, :class => "span-2 first", :rows => 5) %>
    </span>
  </p>
  <p class="span-3 first prefix-1">
    <%= submit_tag("Enregistrer") %>
    ou <%= link_to("Annuler", (session[:back_path] || check_list_path(@check_list)))%>
  </p>
<%- end -%>
<%- content_for(:header) do -%>
  <%= stylesheet_link_tag("back/master.css", "back/jquery-ui-1.8.7.blitzer.css", "back/jquery.autocomplete.css")%>
  <%= javascript_include_tag("jquery-ui-1.8.7.min.js", "jquery-ui-i18n-1.8.7.min.js", "jquery.autocomplete.pack.js") %>
<%- end -%>
<%- content_for(:javascript) do -%>
  $.datepicker.setDefaults($.datepicker.regional['fr']);
  $('.date').datepicker({ showMonthAfterYear: false,
                          showButtonPanel: true,
                          changeYear: true,
                          changeMonth: true,
                          dateFormat: 'dd/mm/yy',
                          constrainInput: true,
                          maxDate: '+5y',
                          yearRange: '<%= Date.today.year-5 %>:<%= Date.today.year+5 %>'});
  $('input#item_place').autocomplete(<%= raw(@check_list.places.to_json) %>, {
                                      minChars: 0,
                                      selectFirst: false
                                    });
  $('input#item_place').focus(function(){
    $('input#item_place').click().click();
  });
<%- end -%>